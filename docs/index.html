<!doctype html>
<html lang="fr">
<head>
	<meta name="generator" content="Hugo 0.145.0">
	<title>yoannlr, notes d&#39;un admin sys</title>
	<meta charset="utf-8">
	
		<meta name="keywords" content="">
	
	<link rel="stylesheet" href="/css/style.css">
	<link rel="icon" type="image/x-icon" href="https://avatars.githubusercontent.com/u/32494673">
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<header>
	<h1><a href="/">yoannlr:~$</a></h1>
	<p>notes d&apos;un admin sys</p>
	<nav>
		<p><a href="https://github.com/yoannlr">GitHub</a>
	</nav>
</header>
<main>
	<article>
		<h1 id="comment-installer-plusieurs-versions-de-la-libstdc">Comment installer plusieurs versions de la libstdc++</h1>
<p>Il n&rsquo;est pas rare de vouloir ex√©cuter un programme et d&rsquo;obtenir une erreur du type :</p>
<p><code>libxxx.so: /lib/x86_64-linux-gnu/libstdc++.so.6: version GLIBCXX_3.4.32 not found (required by .../libxxx.so)</code></p>
<p>La libstdc++ est fournie par gcc (le compilateur GNU).
Pour trouver la version de gcc qui fournit la version GLIBCXX qui vous manque, vous pouvez vous r√©f√©rer √† <a href="https://gcc.gnu.org/onlinedocs/libstdc++/manual/abi.html">son ABI</a>.</p>
<p>Dans mon exemple, il faut installer gcc 13.2.0 minimum.
Malheureusement, √ßa n&rsquo;est pas forc√©ment possible depuis le gestionnaire de paquet de votre distribution.
Sous Debian 12 par exemple, je ne peux pas aller au del√† de gcc 12 avec apt.</p>
<p>Il est en revanche possible de compiler soi-m√™me gcc et la biblioth√®que dans un r√©pertoire s√©par√© des biblioth√®ques du syst√®me, puis d&rsquo;ex√©cuter le programme en lui indiquant d&rsquo;aller y chercher les biblioth√®ques.</p>
<p>La compilation peut prendre une trentaine de minutes (la dur√©e varie selon la puissance de votre ‚Ä¶</p>
		<p class="art-date">Publi&eacute; le 28 f√©vrier 2025</p>
		<p class="read-full"><a href="/version-libstdc&#43;&#43;/">Tout lire</a></p>
	</article>

	<article>
		<h1 id="comment-faire-fonctionner-le-microphone-auna-mic-900-sous-linux">Comment faire fonctionner le microphone Auna Mic 900 sous Linux</h1>
<p><em><strong>&hellip; ou tout autre p√©riph√©rique de son USB non reconnu  !</strong></em></p>
<p>Ce microphone USB, suppos√©ment plug-and-play n&rsquo;est pas reconnu nativement sous Linux.
J&rsquo;ai essay√© sous Debian, sous Arch et sous Fedora : m√™me r√©sultat.
M√™me sous Windows, rien n&rsquo;est d√©tect√© !</p>
<p>Il est pourtant d√©tect√© par le noyau (<code>sudo dmesg -Tw</code> pour voir les messages du noyau en direct) :</p>
<pre tabindex="0"><code>[Sun Feb 16 12:23:24 2025] usb 2-1.1: new full-speed USB device number 14 using ehci-pci
[Sun Feb 16 12:23:24 2025] usb 2-1.1: New USB device found, idVendor=0d8c, idProduct=0134, bcdDevice= 1.00
[Sun Feb 16 12:23:24 2025] usb 2-1.1: New USB device strings: Mfr=1, Product=2, SerialNumber=0
[Sun Feb 16 12:23:24 2025] usb 2-1.1: Product: USB PnP Audio Device
[Sun Feb 16 12:23:24 2025] usb 2-1.1: Manufacturer: C-Media Electronics Inc.
[Sun Feb 16 12:23:24 2025] hid-generic 0003:0D8C:0134.000C: No inputs registered, leaving
[Sun Feb 16 12:23:24 2025] hid-generic ‚Ä¶</code></pre>
		<p class="art-date">Publi&eacute; le 16 f√©vrier 2025</p>
		<p class="read-full"><a href="/auna-mic-900-linux/">Tout lire</a></p>
	</article>

	<article>
		<h1 id="comprendre-laudio-sous-linux">Comprendre l&rsquo;audio sous Linux</h1>
<p>Cet article est aussi disponible en vid√©o üëá</p>

<div class="youtube">
	<a href="https://youtube.com/watch?v=lTv2jJDcPns">
		<div class="youtube-thumb">
			<img src="/play.png" class="youtube-play">
			<img src="https://i.ytimg.com/vi/lTv2jJDcPns/maxresdefault.jpg">
		</div>
	</a>
	
		<p><a href="https://youtube.com/watch?v=lTv2jJDcPns">PulseAudio, ALSA, Jack, Pipewire... comprendre l&#39;audio sous Linux</a></p>
	
	<p>YouTube</p>
</div>

<h2 id="probl√©matique-du-son">Probl√©matique du son</h2>
<p>G√©rer du son pour un ordinateur, c&rsquo;est simplement acheminer des donn√©es binaires aux bons endroits : d&rsquo;une application √† la carte son, ou dans l&rsquo;autre sens.
La carte son, c&rsquo;est le p√©riph√©rique capable de convertir les donn√©es binaires en audio et vice-versa.</p>
<p>Pour que le syst√®me soit capable de parler √† la carte son dans une langue qu&rsquo;elle comprend, il lui faut un driver.
Ce driver, sous Linux, c&rsquo;est ALSA : Advanced Linux Sound Architecture.</p>
<h2 id="multiplexage">Multiplexage</h2>
<p>ALSA peut √™tre utilis√© tout seul pour permettre √† une application d&rsquo;√©mettre ou de recevoir de l&rsquo;audio.
Par exemple, VLC est tout √† fait capable de s&rsquo;adresser √† ALSA.</p>
<p>En revanche, avec ALSA la carte son ne peut √™tre utilis√©e que par une application √† la fois.
Si VLC utilise la ‚Ä¶</p></div></a></div>
		<p class="art-date">Publi&eacute; le 5 d√©cembre 2024</p>
		<p class="read-full"><a href="/audio-sous-linux/">Tout lire</a></p>
	</article>

	<article>
		<h1 id="r√©soudre-le-probl√®me-de-compatibilit√©-entre-linux-et-les-cartes-broadcom-bcm57416">R√©soudre le probl√®me de compatibilit√© entre Linux et les cartes Broadcom BCM57416</h1>
<p>Les versions r√©centes du noyau Linux (apparemment 6.5+) ne reconnaissent pas correctement ces cartes r√©seau qu&rsquo;on peut acheter par exemple chez HPE.
En Linux 6.2, aucun souci.</p>
<p>Messages d&rsquo;erreur type dans dmesg :</p>
<pre tabindex="0"><code>Nov 29 13:04:29 pve2-xxx kernel: bnxt_en 0000:12:00.0 (unnamed net_device) (uninitialized): Device requests max timeout of 100 seconds, may trigger hung task watchdog
Nov 29 13:04:29 pve2-xxx kernel: bnxt_en 0000:12:00.0 eth0: Broadcom BCM57416 NetXtreme-E 10GBase-T Ethernet found at mem de610000, node addr aa:bb:cc:dd:ee:11
Nov 29 13:04:29 pve2-xxx kernel: bnxt_en 0000:12:00.0: 63.008 Gb/s available PCIe bandwidth (8.0 GT/s PCIe x8 link)
Nov 29 13:04:29 pve2-xxx kernel: bnxt_en 0000:12:00.1 (unnamed net_device) (uninitialized): Device requests max timeout of 100 seconds, may trigger hung task watchdog
Nov 29 13:04:29 pve2-xxx kernel: bnxt_en 0000:12:00.1 eth1: Broadcom BCM57416 ‚Ä¶</code></pre>
		<p class="art-date">Publi&eacute; le 3 d√©cembre 2024</p>
		<p class="read-full"><a href="/broadcom-bcm57416-driver/">Tout lire</a></p>
	</article>

	<article>
		<h1 id="une-disposition-de-clavier-pour-les-admin-sys">Une disposition de clavier pour les admin sys</h1>
<p>Certains caract√®res sont p√©nibles √† taper, par exemple : @ | - _ `.
Sous Linux, il est possible de changer la combinaison de touches qui les produit pour √©viter les mouvements de mains compliqu√©s.</p>
<p>Pour ma part :</p>
<ul>
<li>@ = AltGr + A</li>
<li>| = AltGr + P</li>
<li>_ = Maj + Espace</li>
<li>- = AltGr + S</li>
<li>` = AltGr + ≈ì (la touche en dessous de Echap)</li>
</ul>
<p>Deux possibilit√©s pour faire √ßa :</p>
<p>Sous Xorg, au runtime avec xmodmap (exemple de script) :</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span><span style="color:#00f">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#00f"></span><span style="color:#008000"># reset to default layout</span>
</span></span><span style="display:flex;"><span>setxkbmap fr
</span></span><span style="display:flex;"><span><span style="color:#008000"># altgr+a = @</span>
</span></span><span style="display:flex;"><span>xmodmap -e <span style="color:#a31515">&#39;keycode 24 = a A a A at adiaeresis acircumflex&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000"># altr+p = |</span>
</span></span><span style="display:flex;"><span>xmodmap -e <span style="color:#a31515">&#39;keycode 33 = p P p P bar grave paragraph&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000"># altgr+oe = `</span>
</span></span><span style="display:flex;"><span>xmodmap -e <span style="color:#a31515">&#39;keycode 49 = oe OE oe OE grave&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000"># altgr+s = -</span>
</span></span><span style="display:flex;"><span>xmodmap -e <span style="color:#a31515">&#39;keycode 39 = s S s S minus Oslash oslash&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#008000"># shift+space = _</span>
</span></span><span style="display:flex;"><span>xmodmap -e <span style="color:#a31515">&#39;keycode  65 = space underscore space NoSymbol space&#39;</span>
</span></span></code></pre></div><p>Sous Wayland (et Xorg), en modifiant le fichier de layout : <code>/usr/share/X11/xkb/symbols/fr</code> (par exemple) ‚Ä¶</p>
		<p class="art-date">Publi&eacute; le 2 d√©cembre 2024</p>
		<p class="read-full"><a href="/layout-clavier-pour-sysadmin/">Tout lire</a></p>
	</article>

	<article>
		<h1 id="installit-des-scripts-pour-faciliter-linstallation-de-programmes-debian">installit, des scripts pour faciliter l&rsquo;installation de programmes Debian</h1>

<div class="repo repo-github">
	<p class="repo-name"><a href="https://github.com/yoannlr/installit">yoannlr/installit : Easy installation of some Debian programs</a></p>
	
		<p class="repo-type">GitHub</p>
	
</div>

<p>Se chargent d&rsquo;ajouter automatiquement les d√©pots √† APT, et de certaines configurations si n√©cessaire.</p>
<p>Avec curl :</p>
<pre tabindex="0"><code>curl https://raw.githubusercontent.com/yoannlr/installit/main/&lt;script&gt;.sh | sh
</code></pre><p>Avec wget :</p>
<pre tabindex="0"><code>wget -q https://raw.githubusercontent.com/yoannlr/installit/main/&lt;script&gt;.sh -O - | sh
</code></pre>
		<p class="art-date">Publi&eacute; le 29 novembre 2024</p>
		<p class="read-full"><a href="/installit/">Tout lire</a></p>
	</article>

	<article>
		<h1 id="trouvez-l√©quipement-r√©seau-et-le-port-auxquels-vous-√™tes-connect√©">Trouvez l&rsquo;√©quipement r√©seau et le port auxquels vous √™tes connect√©</h1>
<p>Le programme <a href="https://github.com/chall32/LDWin">Link Discovery for Windows</a> remonte les infos du lien auquel on est connect√© (nom du switch, port, num√©ro de vlan&hellip;).
Il utilise tcpdump pour capturer un paquet LLDP ou CDP √©mis par le switch toutes les 60 secondes max.</p>
<p>Sous Linux, la commande suivante fait la m√™me chose (√† ex√©cuter en root) :</p>
<pre tabindex="0"><code>tcpdump -i eno1 &#39;(ether[12:2]=0x88cc or ether[20:2]=0x2000)&#39; -c 1 -s 1500 -v
</code></pre><p>(<code>eno1</code> √† remplacer par l&rsquo;interface r√©seau concern√©e)</p>
<p>Exemple de sortie :</p>
<pre tabindex="0"><code>root@localhost:~# tcpdump -i eno1 &#39;(ether[12:2]=0x88cc or ether[20:2]=0x2000)&#39; -c 1 -s 1500 -v
tcpdump: listening on eno1, link-type EN10MB (Ethernet), snapshot length 1500 bytes
09:26:57.257496 CDPv2, ttl: 180s, checksum: 0x9274 (unverified), length 447
	Device-ID (0x01), value length: 32 bytes: &#39;c9300x.xxxxxx.net&#39;
	Version String (0x05), value length: 250 bytes: 
	  Cisco IOS Software [Amsterdam], Catalyst L3 Switch Software ‚Ä¶</code></pre>
		<p class="art-date">Publi&eacute; le 28 novembre 2024</p>
		<p class="read-full"><a href="/link-discovery-tcpdump/">Tout lire</a></p>
	</article>

	<article>
		<h1 id="r√©cup√©rez-la-cl√©-windows-dun-ordinateur">R√©cup√©rez la cl√© Windows d&rsquo;un ordinateur</h1>
<p>Sous Windows, en cmd admin :</p>
<pre tabindex="0"><code>wmic path softwarelicensingservice get OA3xOriginalProductKey
</code></pre><p>Sous Linux en root :</p>
<pre tabindex="0"><code>sudo grep -Eoa &#39;([A-Za-z0-9]{5}-){4}[A-Za-z0-9]{5}&#39; /sys/firmware/acpi/tables/MSDM
</code></pre>
		<p class="art-date">Publi&eacute; le 20 ao√ªt 2021</p>
		<p class="read-full"><a href="/recuperer-cle-windows/">Tout lire</a></p>
	</article>



</main>
<footer>
	<p>Appr&eacute;ciez la simplicit&eacute; de ce site...</p>
	<p class="rss"><a href="/index.xml">Flux RSS</a></p>
</footer>
</body>
</html>
